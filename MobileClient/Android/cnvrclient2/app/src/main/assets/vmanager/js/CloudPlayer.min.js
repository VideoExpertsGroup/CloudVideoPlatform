if(!window.CloudPlayer) window.CloudPlayer = {};

// config
CloudPlayer.status_update_timeout = 10000; // in milliseconds

// Counters
CloudPlayer.lastLiveIdle = 0;

// backward audio
CloudPlayer.statusBackward = "";
CloudPlayer.supportBackward = false;
CloudPlayer.userRecordPaused = false;

CloudPlayer.isStatusBackwardTransitive = function(){
	return CloudPlayer.statusBackward == "transitive";
}

// Zoom Control
CloudPlayer.generatedZoomPreview = false;

CloudPlayer.enablePTZControls = function(){
	$('#full-player-container').addClass("support-ptz");
	
	if(CloudAPI.containsPageParam("mobile")){
		CloudPlayer.initMobilePTZButtons();
	}
    
	function initPtzButton(action){
		var btn_was_down = false;
		$('.ptz-' + action).unbind().bind('mousedown', function(){
			btn_was_down = true;
			CloudAPI.cameraSendPtz({"action": action});
		}).bind('mouseup', function(){
			if(btn_was_down){
				btn_was_down = false;
				CloudAPI.cameraSendPtz({"action": "stop"});
			}
		}).bind('mouseleave', function(){
			if(btn_was_down){
				btn_was_down = false;
				CloudAPI.cameraSendPtz({"action": "stop"});
			}
		});
	}
	initPtzButton("top");
	initPtzButton("left");
	initPtzButton("right");
	initPtzButton("bottom");
}

CloudPlayer.isLiveAccessDenied = function(){
	return $('.card-container').hasClass('deny-live');
}

CloudPlayer.setLiveStreamNotFound = function(){
	$('.card-container').addClass("livestreamnotfound");
}

CloudPlayer.initMobilePTZButtons = function(){
	$('.player-wrapper').append(''
		+ '<button class="player-button ptz-left hiding-button"></button>'
		+ '<button class="player-button ptz-right hiding-button"></button>'
		+ '<button class="player-button ptz-top hiding-button"></button>'
		+ '<button class="player-button ptz-bottom hiding-button"></button>'
	);

	$('.ptz-left').css({
		'display': 'block',
		'opacity': 1,
		'z-index': 100,
		'background-color': 'rgba(54,58,61,0.64)',
		'position': 'fixed',
		'background-image': 'url("files/images/ptz-left.svg")',
		'background-size': '25px',
		'background-repeat': 'no-repeat',
		'width': '42px',
		'height': '42px',
		'bottom': '182px',
		'right': '102px'
	});
	
	$('.ptz-right').css({
		'display': 'block',
		'opacity': 1,
		'z-index': 100,
		'background-color': 'rgba(54,58,61,0.64)',
		'position': 'fixed',
		'background-image': 'url("files/images/ptz-right.svg")',
		'background-size': '25px',
		'background-repeat': 'no-repeat',
		'width': '42px',
		'height': '42px',
		'bottom': '182px',
		'right': '18px'
	});
	
	$('.ptz-top').css({
		'display': 'block',
		'opacity': 1,
		'z-index': 100,
		'background-color': 'rgba(54,58,61,0.64)',
		'position': 'fixed',
		'background-image': 'url("files/images/ptz-top.svg")',
		'background-size': '25px',
		'background-repeat': 'no-repeat',
		'width': '42px',
		'height': '42px',
		'bottom': '224px',
		'right': '60px'
	});
	
	$('.ptz-bottom').css({
		'display': 'block',
		'opacity': 1,
		'z-index': 100,
		'background-color': 'rgba(54,58,61,0.64)',
		'position': 'fixed',
		'background-image': 'url("files/images/ptz-bottom.svg")',
		'background-size': '25px',
		'background-repeat': 'no-repeat',
		'width': '42px',
		'height': '42px',
		'bottom': '140px',
		'right': '60px'
	});
}
